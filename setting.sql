DROP TABLE ACCOUNT;
DROP SEQUENCE ACCOUNT_ID_SEQ;

CREATE TABLE ACCOUNT (
	ACCOUNT_ID VARCHAR2(20) NOT NULL,
	ACCOUNT_PW VARCHAR2(30) NOT NULL,
	NAME VARCHAR2(20),
	HIREDATE DATE DEFAULT SYSDATE,
	ID VARCHAR2(4) PRIMARY KEY
);

CREATE TABLE CHARACTER (
  USER_ID VARCHAR2(20),
  CH_ID VARCHAR2(20) PRIMARY KEY,
  CH_NAME VARCHAR2(20) NOT NULL, // 캐릭터명
  CH_CLASS VARCHAR2(20) NOT NULL,  // 캐릭터 직업
  // START STATUS
  CH_LEVEL NUMBER(3) NOT NULL,   // 레벨
  CH_CUR_EXP NUMBER(12),

  HP NUMBER(9) NOT NULL,
  MP NUMBER(9) NOT NULL,
  
  CRITICAL NUMBER(3) NOT NULL,
  PHDAMAGE NUMBER(9) NOT NULL,
  ABDAMAGE NUMBER(9) NOT NULL,
  PHDEF NUMBER(9) NOT NULL,
  ABDEF NUMBER(9) NOT NULL,
  HITRATE NUMBER(3),
  EVASIONRATE NUMBER(2),
  STR NUMBER(5) NOT NULL,
  INT NUMBER(5) NOT NULL,
  DEX NUMBER(5) NOT NULL,
  LUCK NUMBER(5) NOT NULL,
  STATUS_POINT NUMBER(5) NOT NULL,
  SKILL_POINT NUMBER(5) NOT NULL,

  ELEMENT_DEF_WATER NUMBER(9),
  ELEMENT_DEF_EARTH NUMBER(9),
  ELEMENT_DEF_WIND NUMBER(9),
  ELEMENT_DEF_FIRE NUMBER(9),

  ELEMENT_ATK_WATER NUMBER(9),
  ELEMENT_ATK_EARTH NUMBER(9),
  ELEMENT_ATK_WIND NUMBER(9),
  ELEMENT_ATK_FIRE NUMBER(9),

  // END STATUS

  CREATED_DATE DATE,
  LAST_LOGOUT_DATE DATE,
  PLAY_TIME VARCHAR2(20),
  USER_STATUS VARCHAR2(50),


  CONSTRAINT fk_code FOREIGN KEY(USER_ID)
         REFERENCES ACCOUNT(USER_ID) ON DELETE CASCADE;
);

CREATE TABLE CH_INVENTORY_EQUIP (
  CH_ID VARCHAR2(20),
  ITEM_ID VARCHAR2(20) NOT NULL,
  ITEM_COUNT NUMBER(2) NOT NULL,
  INVEN_INDEX NUMBER(2) NOT NULL,
  

  CONSTRAINT fk_code FOREIGN KEY(CH_ID)
    REFERENCES CHARACTER(CH_ID) ON DELETE CASCADE;
);

CREATE TABLE ITEM_EQUIP (
  ITEM_ID VARCHAR2(10) PRIMARY KEY,
  ITEM_TYPE VARCHAR2(20),
  ITEM_NAME VARCHAR2(20) NOT NULL,
  ITEM_DESC VARCHAR2(999) NOT NULL,
  
  BUY_PRICE NUMBER(20) NOT NULL,
  SELL_PRICE NUMBER(20) NOT NULL,
  EQUIP_LIMIT_LEVEL NUMBER(3),


  MAX_UPGRADE_COUNT NUMBER(2), //최대 업그레이드 단계
  MAX_NESTING_NUM NUMBER(2), //최대 중첩 개수
);

CREATE SEQUENCE CHARACTER_ID_SEQ START WITH 1 INCREMENT BY 1;

CREATE SEQUENCE ITEM_ID_SEQ START_WITH 1 INCREMENT BY 1;



CREATE SEQUENCE ACCOUNT_ID_SEQ START WITH 1 INCREMENT BY 1;

INSERT INTO ACCOUNT VALUES ('admin','123456' , '������', SYSDATE , ACCOUNT_ID_SEQ.NEXTVAL);

COMMIT;
